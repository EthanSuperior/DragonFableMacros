from actions import ACT

__import__("os").chdir("./Quests")


def BicentennialDragonLord():
    # 22085 / 39892 Total Defender Metals farmed
    startWaveBtn = "./BicentennialDragonLord/start#(0.713, 0.633, 0.893, 0.687).png"
    waves = [
        "./BicentennialDragonLord/eastWave1#(0.25, 0.2, 1, 1).png",
        "./BicentennialDragonLord/westWave2#(0, 0.2, 0.75, 1).png",
        "./BicentennialDragonLord/eastWave3#(0.25, 0.2, 1, 1).png",
    ]
    if ACT.ClickIf(startWaveBtn, timeout=20):  # True
        if not ACT.BattleWar(waves, [[2, 2, 2], [2, 2, 2], [2, 2, 2]]):
            ACT.MouseClick((0.01, 0.573))
            ACT.AbandonQuest()
            return BicentennialDragonLord()
        return True
    return False


def DarkTower():
    ACT.ClickIf("DarkTower/#(0.359, 0.504, 0.451, 0.618).png", timeout=5.302)
    ACT.ClickIf("DarkTower/#(0.246, 0.464, 0.386, 0.512).png", timeout=18.622)
    ACT.ClickIf("DarkTower/#(0.238, 0.406, 0.394, 0.45).png", timeout=7.318)
    ACT.ClickIf("DarkTower/#(0.244, 0.346, 0.386, 0.388).png", timeout=7.684)
    ACT.ClickIf("DarkTower/#(0.66, 0.41, 0.81, 0.448).png", timeout=11.98)
    ACT.ClickIf("DarkTower/#(0.772, 0.348, 0.916, 0.388).png", timeout=17.378)
    ACT.ClickIf("DarkTower/#(0.647, 0.353, 0.807, 0.397).png", timeout=11.004)
    ACT.CutsceneEnd("DarkTower/inQuest#(0.472, 0.019, 0.626, 0.277).png")
    ACT.Sleep(0.1)
    ACT.MouseClick((0.985, 0.481))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.985, 0.481))
    ACT.Sleep(3)
    ACT.MouseClick((0.985, 0.481))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.985, 0.481))
    ACT.Sleep(3)
    ACT.MouseClick((0.985, 0.481))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.985, 0.481))
    ACT.Sleep(3)
    ACT.MouseClick((0.524, 0.027))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.524, 0.027))
    ACT.Sleep(3)
    ACT.MouseClick((0.755, 0.425))
    ACT.MouseClick((0.755, 0.425))
    ACT.ClickIf("DarkTower/#(0.021, 0.44, 0.127, 0.744).png", timeout=10)
    ACT.Sleep(3)
    ACT.MouseClick((0.027, 0.688))
    ACT.Sleep(2.608)
    ACT.MouseClick((0.61, 0.249))
    ACT.Sleep(2.437)
    ACT.MouseClick((0.756, 0.611))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.756, 0.611))
    ACT.Sleep(1.921)
    ACT.MouseClick((0.793, 0.155))
    ACT.Sleep(2.236)
    ACT.MouseClick((0.528, 0.487))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.528, 0.487))
    ACT.AwaitImg("DarkTower/txt1#(0.365, 0.004, 0.627, 0.028).png", timeout=30)
    ACT.CutsceneEnd("DarkTower/#(0.402, 0.377, 0.614, 0.445).png")
    ACT.ClickIf("DarkTower/#(0.402, 0.377, 0.614, 0.445).png")
    ACT.QuestComplete.Await().Close()
    ACT.MouseClick((0.5, 0.5))
    ACT.NewItem.Await().Keep()
    return False


def Trithril():
    ACT.LoreBook.Pot()
    ACT.MouseClick((0.827, 0.8))
    ACT.AwaitImg("Trithril/#(0.255, 0.089, 0.509, 0.361).png", timeout=13)
    ACT.ClickIf("Trithril/#(0.689, 0.34, 0.829, 0.386).png", timeout=10.914)
    ACT.ClickIf("Trithril/#(0.674, 0.128, 0.838, 0.174).png")
    ACT.Sleep(0.3)
    ACT.MouseClick((0.969, 0.799))
    ACT.ClickIf("Trithril/#(0.706, 0.382, 0.862, 0.432).png", timeout=12)
    while not ACT.QuestComplete:
        ACT.Battle("ChaosWeaver", 1)
        ACT.Sleep(1)
    ACT.QuestComplete.Close()
    ACT.MouseClick((0.5, 0.5))
    ACT.Sleep(1)
    ACT.NewItem.Keep()
    return True


def ThroughTheTangle():
    ACT.LoreBook.Pot()
    ACT.ClickIf("ThroughTheTangle/#(0.84, 0.043, 0.974, 0.083).png", timeout=15.9)
    ACT.ClickIf("ThroughTheTangle/#(0.837, 0.267, 0.979, 0.301).png", timeout=8.498)
    ACT.CutsceneEnd("ThroughTheTangle/#(0.385, 0.108, 0.619, 0.386).png")
    ACT.MouseClick((0.675, 0.758))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.675, 0.758))
    ACT.Sleep(3.807)
    ACT.MouseClick((0.302, 0.658))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.228, 0.696))
    ACT.Sleep(3.52)
    ACT.MouseClick((0.017, 0.627))
    ACT.Sleep(3.822)
    ACT.MouseClick((0.221, 0.773))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.221, 0.773))
    ACT.Sleep(3.822)
    ACT.MouseClick((0.428, 0.629))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.428, 0.629))
    ACT.Sleep(2.827)
    ACT.MouseClick((0.016, 0.651))
    ACT.Sleep(3.446)
    ACT.MouseClick((0.428, 0.541))
    ACT.Battle("ChaosWeaver", 1)
    ACT.Sleep(2.288)
    ACT.MouseClick((0.692, 0.718))
    ACT.Sleep(2.288)
    ACT.MouseClick((0.967, 0.772))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.967, 0.772))
    ACT.Sleep(3.863)
    ACT.MouseClick((0.96, 0.756))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.96, 0.756))
    ACT.Sleep(3.045)
    ACT.MouseClick((0.713, 0.753))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.713, 0.753))
    ACT.Sleep(2.324)
    ACT.MouseClick((0.577, 0.804))
    ACT.Sleep(2.244)
    ACT.Inventory.Heal(False)
    ACT.Inventory.Heal(False)
    ACT.Inventory.Mana(False)
    ACT.Inventory.Mana()
    ACT.MouseClick((0.974, 0.725))
    ACT.Sleep(3.421)
    ACT.MouseClick((0.969, 0.648))
    ACT.Battle("ChaosWeaver", "BOSS")
    ACT.CutsceneEnd("ThroughTheTangle/#(0.378, 0.335, 0.614, 0.405).png")
    ACT.ClickIf("ThroughTheTangle/#(0.378, 0.335, 0.614, 0.405).png", timeout=12.686)
    ACT.MouseClick((0.969, 0.648))
    ACT.QuestComplete()
    ACT.MouseClick((0.5, 0.5))
    ACT.NewItem.Keep()
    return True


def Mushrooms():
    ACT.LoreBook.Pot()
    ACT.MouseClick((0.13, 0.576))
    ACT.ClickIf("Mushrooms/#(0.525, 0.421, 0.669, 0.459).png", timeout=19.442)
    ACT.ClickIf("Mushrooms/#(0.527, 0.364, 0.669, 0.406).png", timeout=7.452)
    ACT.CutsceneEnd("Mushrooms/#(0.323, 0.326, 0.419, 0.412).png")
    ACT.MouseClick((0.97, 0.624))
    ACT.Sleep(3.562)
    ACT.MouseClick((0.965, 0.609))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.965, 0.609))
    ACT.Sleep(5.011)
    ACT.MouseClick((0.974, 0.55))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.974, 0.55))
    ACT.Sleep(3.081)
    ACT.MouseClick((0.974, 0.55))
    ACT.Battle("ChaosWeaver", 2)
    ACT.Sleep(3.081)
    ACT.MouseClick((0.025, 0.597))
    ACT.Sleep(2.605)
    ACT.MouseClick((0.025, 0.597))
    ACT.Sleep(2.226)
    ACT.MouseClick((0.555, 0.617))
    ACT.Sleep(3.052)
    ACT.MouseClick((0.647, 0.325))
    ACT.Sleep(2.783)
    ACT.MouseClick((0.012, 0.613))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.012, 0.613))
    ACT.Sleep(3.538)
    ACT.MouseClick((0.016, 0.58))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.016, 0.58))
    ACT.Sleep(3.755)
    ACT.MouseClick((0.124, 0.509))
    ACT.Sleep(3.684)
    ACT.MouseClick((0.49, 0.743))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.49, 0.743))
    ACT.Sleep(3.861)
    ACT.MouseClick((0.807, 0.563))
    ACT.Sleep(1.701)
    ACT.MouseClick((0.197, 0.291))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.197, 0.291))
    ACT.Sleep(3.788)
    ACT.MouseClick((0.043, 0.067))
    ACT.Sleep(3.387)
    ACT.MouseClick((0.29, 0.548))
    ACT.Battle("ChaosWeaver", ("487vc073", "67834"))
    ACT.CutsceneEnd("Mushrooms/#(0.376, 0.321, 0.612, 0.403).png")
    ACT.ClickIf("Mushrooms/#(0.376, 0.321, 0.612, 0.403).png")
    ACT.QuestComplete()
    ACT.MouseClick((0.5, 0.5))
    ACT.NewItem.Keep()
    return True


def ProclamationMedal_SH():
    ACT.ClickIf("ProclamationMedals/sh_start#(0.834, 0.03, 0.974, 0.09).png", timeout=9.644)
    ACT.ClickIf("#(0.828, 0.071, 0.986, 0.127).png", timeout=18.792)
    ACT.Sleep(2.157)
    ACT.MouseClick((0.58, -0.014))
    ACT.Sleep(3)
    ACT.MouseClick((0.694, 0.629))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.694, 0.629))
    ACT.Sleep(1.191)
    ACT.MouseClick((0.376, 0.639))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.376, 0.639))
    ACT.Sleep(0.874)
    ACT.MouseClick((0.158, 0.597))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.158, 0.597))
    ACT.Sleep(0.999)
    ACT.MouseClick((0.38, 0.373))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.38, 0.373))
    ACT.Sleep(1.061)
    ACT.MouseClick((0.508, 0.422))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.508, 0.422))


def ChickenCow():
    ACT.AwaitImg("ChickenCow/#(0.413, 0.008, 0.597, 0.118).png", timeout=30)
    ACT.MouseClick((0.301, 0.352))
    ACT.ClickIf("ChickenCow/#(0.267, 0.145, 0.407, 0.187).png")
    ACT.ClickIf("ChickenCow/#(0.121, 0.444, 0.257, 0.486).png")
    ACT.ClickIf("ChickenCow/#(0.121, 0.341, 0.261, 0.383).png")
    ACT.ClickIf("ChickenCow/#(0.884, 0.739, 0.98, 0.793).png")
    ACT.ClickIf("ChickenCow/#(0.194, 0.664, 0.328, 0.704).png")
    ACT.ClickIf("ChickenCow/#(0.116, 0.494, 0.258, 0.538).png")
    ACT.CutsceneEnd("ChickenCow/#(0.118, 0.369, 0.26, 0.415).png")
    ACT.ClickIf("ChickenCow/#(0.118, 0.369, 0.26, 0.415).png")
    ACT.CutsceneEnd("ChickenCow/cmplt#(0.508, 0.511, 0.672, 0.549).png")
    ACT.ClickIf("ChickenCow/cmplt#(0.508, 0.511, 0.672, 0.549).png")
    ACT.FinishQuestAndItems(keepMode="ChickenCowArmor")


def BraughlmurkCrypt():
    ACT.AwaitImg("Braughlmurk/crypt#(0.098, 0.037, 0.336, 0.261).png", timeout=12.574)
    ACT.LoreBook.Pot()
    ACT.Sleep(2.96)
    ACT.MouseClick((0.438, 0.12))
    ACT.Sleep(2.83)
    ACT.MouseClick((0.984, 0.648))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.984, 0.648))
    ACT.Sleep(3.128)
    ACT.MouseClick((0.984, 0.646))
    ACT.Sleep(2.94)
    ACT.MouseClick((0.516, 0.463))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.516, 0.463))
    ACT.Sleep(1.652)
    ACT.MouseClick((0.516, 0.463))
    ACT.Sleep(2.179)
    ACT.MouseClick((0.08, 0.571))
    ACT.Battle("ChaosWeaver", 3)
    ACT.MouseClick((0.08, 0.571))
    ACT.Sleep(2.042)
    ACT.MouseClick((0.029, 0.589))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.029, 0.589))
    ACT.Sleep(3.929)
    ACT.MouseClick((0.04, 0.609))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.04, 0.609))
    ACT.Sleep(3.197)
    ACT.MouseClick((0.04, 0.609))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.04, 0.609))
    ACT.Sleep(2.829)
    ACT.MouseClick((0.219, 0.338))
    ACT.Sleep(2.515)
    ACT.MouseClick((0.498, 0.384))
    ACT.Battle("ChaosWeaver", 3)
    ACT.MouseClick((0.498, 0.384))
    ACT.QuestComplete.Await().Close()
    ACT.MouseClick((0.5, 0.5))
    ACT.NewItem.Await().Keep()


def BraughlmurkTower():
    ACT.AwaitImg("Braughlmurk/tower#(0.078, 0.015, 0.158, 0.421).png", timeout=8.828)
    ACT.LoreBook.Pot()
    ACT.Sleep(2.49)
    ACT.MouseClick((0.617, 0.261))
    ACT.Sleep(4.011)
    ACT.MouseClick((0.059, 0.432))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.059, 0.432))
    ACT.Sleep(2.009)
    ACT.MouseClick((0.194, 0.212))
    ACT.Sleep(1.818)
    ACT.MouseClick((0.097, 0.55))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.097, 0.55))
    ACT.Sleep(2.229)
    ACT.MouseClick((0.153, 0.284))
    ACT.Sleep(1.677)
    ACT.MouseClick((0.165, 0.529))
    ACT.Battle("ChaosWeaver", 3)
    ACT.MouseClick((0.165, 0.529))
    ACT.Sleep(2.489)
    ACT.MouseClick((0.13, 0.251))
    ACT.Sleep(1.45)
    ACT.MouseClick((0.089, 0.548))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.089, 0.548))
    ACT.Sleep(1.767)
    ACT.MouseClick((0.168, 0.215))
    ACT.Sleep(1.377)
    ACT.MouseClick((0.113, 0.583))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.113, 0.583))
    ACT.Sleep(2.626)
    ACT.MouseClick((0.167, 0.207))
    ACT.Sleep(1.721)
    ACT.MouseClick((0.091, 0.561))
    ACT.Battle("ChaosWeaver", 1)
    ACT.MouseClick((0.091, 0.561))
    ACT.Sleep(2.122)
    ACT.MouseClick((0.157, 0.243))
    ACT.Sleep(2.355)
    ACT.MouseClick((0.457, 0.487))
    ACT.Battle("ChaosWeaver", 2)
    ACT.MouseClick((0.457, 0.487))
    ACT.Sleep(2.059)
    ACT.MouseClick((0.501, 0.249))
    ACT.Sleep(1.634)
    ACT.MouseClick((0.906, 0.651))
    ACT.Battle("ChaosWeaver", 3)
    ACT.MouseClick((0.906, 0.651))
    ACT.QuestComplete.Await().Close()
    ACT.MouseClick((0.5, 0.5))
    ACT.NewItem.Await().Keep()


def AerisBattleTower():
    ACT.AwaitImg("Aeris/#(0.439, 0.039, 0.561, 0.215).png")
    ACT.MouseClick((0.538, 0.35))
    ACT.AwaitImg("Aeris/#(0.698, 0.034, 0.956, 0.286).png")
    ACT.MouseClick((0.538, 0.35))
    while not ACT.QuestComplete:
        ACT.AwaitImg("Aeris/#(0.756, 0.064, 0.978, 0.338).png")
        ACT.ClickIf("Aeris/#(0.052, 0.622, 0.196, 0.664).png")
        ACT.ClickIf("Aeris/#(0.026, 0.497, 0.234, 0.557).png")
        ACT.Battle("ChaosWeaver", ["4v0c", "78"])
    ACT.QuestComplete()
    ACT.MouseClick((0.5, 0.5))
    ACT.NewItem.Keep()


if __name__ == "__main__":
    pass
    # ACT.CutsceneEnd("ChickenCow/cmplt#(0.508, 0.511, 0.672, 0.549).png")
    # ACT.ClickIf("ChickenCow/cmplt#(0.508, 0.511, 0.672, 0.549).png")
    # ACT.KeepItem(keepMode="ChickenCowArmor")
    # ACT.NewItem.Await()
    # for _ in range(50):
    #     ChickenCow()
    # exit()
    # while not ACT.QuestComplete:
    #     ACT.Battle("ChaosWeaver", -3)
    #     ACT.Sleep(1)
    # InevitableEquilibrium()
    # [BraughlmurkTower() for _ in range(6)]
    # all(iter(AARGH, False))
    # Timekillers()
    # num = int(s[1]) if len((s := __import__("sys").argv)) > 1 and s[1].isdigit() else 100000
    # for _ in range(num):
    #     AerisBattleTower()
    # all(iter(BicentennialDragonLord, False))
    # globals()['func_name']()
